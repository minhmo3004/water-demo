<div class="water-meter-page">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-icon">
      <i class="fas fa-tachometer-alt"></i>
    </div>
    <h1 class="page-title">Thông tin đồng hồ</h1>
  </div>

  <!-- Search and Filter Section -->
  <div class="filter-section">
    <div class="search-container">
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search"
        [(ngModel)]="filter().searchTerm"
        (input)="onFilterChange()"
      >
      <i class="fas fa-search search-icon"></i>
    </div>
    
    <div class="filter-dropdown">
      <select 
        class="status-filter"
        [(ngModel)]="filter().statusFilter"
        (change)="onFilterChange()"
      >
        <option value="">Filter by Status</option>
        <option value="Normal">Normal</option>
        <option value="On fixing">On fixing</option>
        <option value="Anomaly detected">Anomaly detected</option>
      </select>
    </div>
    
    <button class="export-btn" (click)="exportData()">
      Xuất file dữ liệu
    </button>
  </div>

  <!-- Table Container with Scroll -->
  <div class="table-container">
    <div class="table-wrapper">
      <table class="water-meter-table">
        <thead>
          <tr>
            <th class="checkbox-column">
              <input 
                type="checkbox" 
                [checked]="selectAll()"
                (change)="onSelectAll()"
                class="table-checkbox"
              >
            </th>
            <th>Name</th>
            <th>Address</th>
            <th>Status</th>
            <th>Join date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr 
            *ngFor="let meter of filteredMeters(); trackBy: trackByMeterId"
            class="table-row"
            [class.selected]="meter.selected"
          >
            <td class="checkbox-column">
              <input 
                type="checkbox" 
                [checked]="meter.selected || false"
                (change)="onSelectMeter(meter.id)"
                class="table-checkbox"
              >
            </td>
            <td class="name-column">{{ meter.name }}</td>
            <td class="address-column">{{ meter.address }}</td>
            <td class="status-column">
              <span class="status-badge" [ngClass]="getStatusClass(meter.status)">
                {{ meter.status }}
              </span>
            </td>
            <td class="date-column">{{ meter.joinDate }}</td>
            <td class="actions-column">
              <button class="action-btn" (click)="viewDetails(meter.id)">
                <i class="fas fa-chevron-down"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
